import DynamicConfig from './DynamicConfig';
import { FeatureGate } from './FeatureGate';
import Layer from './Layer';
import { StatsigOptions } from './StatsigOptions';
import { StatsigUser } from './StatsigUser';
export declare type LogEventObject = {
    eventName: string;
    user: StatsigUser;
    value?: string | number | null;
    metadata?: Record<string, unknown> | null;
    time?: string | null;
};
/**
 * The global statsig class for interacting with gates, configs, experiments configured in the statsig developer console.  Also used for event logging to view in the statsig console, or for analyzing experiment impacts using pulse.
 */
export default class StatsigServer {
    private _pendingInitPromise;
    private _ready;
    private _options;
    private _logger;
    private _secretKey;
    private _evaluator;
    private _fetcher;
    private _errorBoundary;
    private _diagnostics;
    private outputLogger;
    constructor(secretKey: string, options?: StatsigOptions);
    /**
     * Initializes the statsig server SDK. This must be called before checking gates/configs or logging events.
     * @throws Error if a Server Secret Key is not provided
     */
    initializeAsync(): Promise<void>;
    /**
     * Check the value of a gate configured in the statsig console
     * @throws Error if initialize() was not called first
     * @throws Error if the gateName is not provided or not a non-empty string
     */
    checkGate(user: StatsigUser, gateName: string): Promise<boolean>;
    getFeatureGate(user: StatsigUser, gateName: string): Promise<FeatureGate>;
    checkGateWithExposureLoggingDisabled(user: StatsigUser, gateName: string): Promise<boolean>;
    getFeatureGateWithExposureLoggingDisabled(user: StatsigUser, gateName: string): Promise<FeatureGate>;
    logGateExposure(user: StatsigUser, gateName: string): void;
    /**
     * Checks the value of a config for a given user
     * @throws Error if initialize() was not called first
     * @throws Error if the configName is not provided or not a non-empty string
     */
    getConfig(user: StatsigUser, configName: string): Promise<DynamicConfig>;
    getConfigWithExposureLoggingDisabled(user: StatsigUser, configName: string): Promise<DynamicConfig>;
    logConfigExposure(user: StatsigUser, configName: string): void;
    /**
     * Checks the value of a config for a given user
     * @throws Error if initialize() was not called first
     * @throws Error if the experimentName is not provided or not a non-empty string
     */
    getExperiment(user: StatsigUser, experimentName: string): Promise<DynamicConfig>;
    getExperimentWithExposureLoggingDisabled(user: StatsigUser, experimentName: string): Promise<DynamicConfig>;
    logExperimentExposure(user: StatsigUser, experimentName: string): void;
    /**
     * Checks the value of a config for a given user
     * @throws Error if initialize() was not called first
     * @throws Error if the layerName is not provided or not a non-empty string
     */
    getLayer(user: StatsigUser, layerName: string): Promise<Layer>;
    getLayerWithExposureLoggingDisabled(user: StatsigUser, layerName: string): Promise<Layer>;
    logLayerParameterExposure(user: StatsigUser, layerName: string, parameterName: string): void;
    /**
     * Log an event for data analysis and alerting or to measure the impact of an experiment
     * @throws Error if initialize() was not called first
     */
    logEvent(user: StatsigUser, eventName: string, value?: string | number | null, metadata?: Record<string, unknown> | null): void;
    logEventObject(eventObject: LogEventObject): void;
    /**
     * Informs the statsig SDK that the server is closing or shutting down
     * so the SDK can clean up internal state
     */
    shutdown(): void;
    flush(): Promise<void>;
    getClientInitializeResponse(user: StatsigUser): Record<string, unknown> | null;
    overrideGate(gateName: string, value: boolean, userID?: string | null): void;
    overrideConfig(configName: string, value: Record<string, unknown>, userID?: string | null): void;
    overrideLayer(layerName: string, value: Record<string, unknown>, userID?: string | null): void;
    getFeatureGateList(): string[];
    getExperimentList(): string[];
    private logGateExposureImpl;
    private getGateImpl;
    private logConfigExposureImpl;
    private getConfigImpl;
    private getLayerImpl;
    private logLayerParameterExposureImpl;
    private _validateInputs;
    private _fetchConfig;
    private _makeOnDefaultValueFallbackFunction;
}
